<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title layout:title-pattern="$CONTENT_TITLE - $LAYOUT_TITLE">Animal Disease Reporting System</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" th:href="@{/css/variables.css}">
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
    <link rel="stylesheet" th:href="@{/css/button.css}">
    <link rel="stylesheet" th:href="@{/css/form.css}">
    <link rel="stylesheet" th:href="@{/css/table.css}">
    <link rel="stylesheet" th:href="@{/css/modal.css}">
    
    <!-- Page-specific CSS and other head content -->
    <th:block layout:fragment="head">
        <!-- Additional head content will be inserted here -->
    </th:block>
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
        <aside class="dashboard-sidebar">
            <div class="dashboard-header">
                <div class="dashboard-logo">
                    <span>üêÑ</span>
                    <span>ADRS</span>
                </div>
            </div>
            
            <nav class="dashboard-nav">
                <ul>
                    <li>
                        <a th:href="@{/dashboard}" 
                           th:classappend="${currentUri == '/dashboard'} ? 'active' : ''">
                            <span>üìä</span>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li sec:authorize="hasRole('ADMIN')">
                        <a th:href="@{/users}" 
                           th:classappend="${#strings.startsWith(currentUri, '/users')} ? 'active' : ''">
                            <span>üë•</span>
                            <span>Users</span>
                        </a>
                    </li>
                    <li sec:authorize="hasRole('ADMIN')">
                        <a th:href="@{/configuration}" 
                           th:classappend="${#strings.startsWith(currentUri, '/configuration')} ? 'active' : ''">
                            <span>‚öôÔ∏è</span>
                            <span>Configuration</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="dashboard-user">
                <div class="dashboard-user-info">
                    <div class="dashboard-user-avatar" 
                         th:text="${#strings.substring(#authentication.name, 0, 1).toUpperCase()}">
                        U
                    </div>
                    <div class="dashboard-user-details">
                        <div class="dashboard-user-name" th:text="${#authentication.name}">Username</div>
                        <div class="dashboard-user-role" 
                             th:text="${#strings.replace(#authentication.authorities[0].authority, 'ROLE_', '')}">
                            Role
                        </div>
                    </div>
                </div>
                <form th:action="@{/logout}" method="post">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button type="submit" class="btn btn-outline btn-block btn-sm">
                        <span>üö™</span>
                        <span>Logout</span>
                    </button>
                </form>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="dashboard-main">
            <div class="dashboard-topbar">
                <h1 th:text="${pageTitle} ?: 'Dashboard'">Page Title</h1>
            </div>
            
            <div class="dashboard-content">
                <!-- Flash Messages -->
                <div th:if="${successMessage}" class="alert alert-success mb-md" th:text="${successMessage}">
                    Success message
                </div>
                <div th:if="${errorMessage}" class="alert alert-error mb-md" th:text="${errorMessage}">
                    Error message
                </div>
                
                <!-- Page Content -->
                <div layout:fragment="content">
                    <!-- Content will be inserted here -->
                </div>
            </div>
        </main>
    </div>
    
    <!-- JavaScript Files -->
    <script th:src="@{/js/main.js}"></script>
    <div layout:fragment="scripts">
        <!-- Additional scripts will be inserted here -->
    </div>
</body>
</html>
